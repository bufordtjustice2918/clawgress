set interfaces bridge br2000 address '10.10.7.1/30'
set interfaces bridge br2000 description 'customer blue'
set interfaces bridge br2000 member interface eth2.2600
set interfaces bridge br2000 member interface vxlan2000
set interfaces bridge br2000 vrf 'blue'
set interfaces dummy dum0 address '10.255.253.1/32'
set interfaces dummy dum0 address '10.255.253.24/32'
set interfaces ethernet eth0 duplex 'auto'
set interfaces ethernet eth0 offload gro
set interfaces ethernet eth0 offload gso
set interfaces ethernet eth0 offload sg
set interfaces ethernet eth0 offload tso
set interfaces ethernet eth0 speed 'auto'
set interfaces ethernet eth0 vif 6 address '192.168.0.1/24'
set interfaces ethernet eth0 vif 6 vrf 'green'
set interfaces ethernet eth1 duplex 'auto'
set interfaces ethernet eth1 speed 'auto'
set interfaces ethernet eth1 vif 101 address '192.0.2.1/31'
set interfaces ethernet eth1 vif 888 address '192.0.2.3/31'
set interfaces ethernet eth1 vif 888 vrf 'blue'
set interfaces ethernet eth2 duplex 'auto'
set interfaces ethernet eth2 speed 'auto'
set interfaces ethernet eth2 vif 1111 address '192.0.2.11/31'
set interfaces ethernet eth2 vif 1111 vrf 'red'
set interfaces ethernet eth2 vif 1113 address '192.0.2.13/31'
set interfaces ethernet eth2 vif 1113 vrf 'red'
set interfaces ethernet eth2 vif 2600
set interfaces vxlan vxlan2000 mtu '1500'
set interfaces vxlan vxlan2000 parameters nolearning
set interfaces vxlan vxlan2000 port '4789'
set interfaces vxlan vxlan2000 source-address '10.255.253.1'
set interfaces vxlan vxlan2000 vni '2000'
set protocols bgp address-family l2vpn-evpn advertise ipv4 unicast
set protocols bgp address-family l2vpn-evpn advertise-all-vni
set protocols bgp neighbor 10.255.253.9 address-family ipv4-unicast allowas-in number '10'
set protocols bgp neighbor 10.255.253.9 address-family ipv4-unicast nexthop-self
set protocols bgp neighbor 10.255.253.9 remote-as 'internal'
set protocols bgp neighbor 10.255.253.9 update-source '10.255.253.1'
set protocols bgp neighbor 10.255.253.25 peer-group 'EVPN'
set protocols bgp parameters log-neighbor-changes
set protocols bgp parameters network-import-check
set protocols bgp parameters router-id '10.255.253.1'
set protocols bgp peer-group EVPN address-family l2vpn-evpn
set protocols bgp peer-group EVPN remote-as '100'
set protocols bgp peer-group EVPN update-source 'dum0'
set protocols bgp system-as '100'
set protocols ospf interface dum0 area '0'
set protocols ospf interface eth1.101 area '0'
set protocols ospf interface eth1.101 network 'broadcast'
set protocols ospf log-adjacency-changes detail
set protocols ospf parameters router-id '10.255.253.1'
set service ntp allow-client address '0.0.0.0/0'
set service ntp allow-client address '::/0'
set service ntp server 0.pool.ntp.org
set service ntp server 1.pool.ntp.org
set service ntp server 2.pool.ntp.org
set service ssh disable-host-validation
set service ssh port '22'
set system config-management commit-revisions '20'
set system conntrack modules ftp
set system conntrack modules h323
set system conntrack modules nfs
set system conntrack modules pptp
set system conntrack modules sip
set system conntrack modules sqlnet
set system conntrack modules tftp
set system console device ttyS0 speed '115200'
set system domain-name 'vyos.net'
set system host-name 'evpn-l3vpn-vrf-foo'
set system login user vyos authentication encrypted-password '$6$O5gJRlDYQpj$MtrCV9lxMnZPMbcxlU7.FI793MImNHznxGoMFgm3Q6QP3vfKJyOSRCt3Ka/GzFQyW1yZS4NS616NLHaIPPFHc0'
set system login user vyos authentication plaintext-password ''
set system option ctrl-alt-delete 'reboot'
set system option reboot-on-panic
set system syslog console facility all level 'emerg'
set system syslog console facility mail level 'info'
set system syslog local facility all level 'info'
set system syslog local facility local7 level 'debug'
set system syslog preserve-fqdn
set system time-zone 'Europe/Berlin'
set vrf name blue protocols bgp address-family ipv4-unicast redistribute connected
set vrf name blue protocols bgp neighbor 192.0.2.2 address-family ipv4-unicast allowas-in number '1'
set vrf name blue protocols bgp neighbor 192.0.2.2 address-family ipv4-unicast maximum-prefix '20'
set vrf name blue protocols bgp neighbor 192.0.2.2 local-as 667 no-prepend replace-as
set vrf name blue protocols bgp neighbor 192.0.2.2 remote-as '100'
set vrf name blue protocols bgp neighbor 192.0.2.4 address-family ipv4-unicast maximum-prefix '40'
set vrf name blue protocols bgp neighbor 192.0.2.4 local-as 200
set vrf name blue protocols bgp neighbor 192.0.2.4 remote-as '300'
set vrf name blue protocols bgp neighbor 192.0.2.6 address-family ipv4-unicast allowas-in number '7'
set vrf name blue protocols bgp neighbor 192.0.2.6 local-as 667 no-prepend replace-as
set vrf name blue protocols bgp neighbor 192.0.2.6 remote-as '112'
set vrf name blue table '2001'
set vrf name blue vni '2001'
set vrf name green table '4001'
set vrf name red protocols bgp address-family ipv4-unicast redistribute connected
set vrf name red protocols bgp neighbor 192.0.2.10 peer-group 'foo'
set vrf name red protocols bgp neighbor 192.0.2.12 address-family ipv4-unicast allowas-in number '10'
set vrf name red protocols bgp neighbor 192.0.2.12 local-as 65412 no-prepend replace-as
set vrf name red protocols bgp neighbor 192.0.2.12 peer-group 'bar'
set vrf name red protocols bgp neighbor 192.0.2.14 local-as 1111 no-prepend replace-as
set vrf name red protocols bgp neighbor 192.0.2.14 peer-group 'foo'
set vrf name red protocols bgp peer-group bar address-family ipv4-unicast allowas-in number '10'
set vrf name red protocols bgp peer-group bar remote-as '333'
set vrf name red protocols bgp peer-group foo address-family ipv4-unicast soft-reconfiguration inbound
set vrf name red protocols bgp peer-group foo local-as 1000
set vrf name red protocols bgp peer-group foo remote-as '300'
set vrf name red table '3001'
set vrf name red vni '3001'
